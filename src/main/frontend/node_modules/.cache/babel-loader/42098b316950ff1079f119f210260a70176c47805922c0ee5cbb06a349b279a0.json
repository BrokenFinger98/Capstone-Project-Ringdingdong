{"ast":null,"code":"import _slicedToArray from\"/Users/yu-sun00/Desktop/\\u1109\\u1166\\u110C\\u1169\\u11BC\\u1103\\u1162/4-2\\u1112\\u1161\\u11A8\\u1100\\u1175/\\u110F\\u1162\\u11B8\\u1109\\u1173\\u1110\\u1169\\u11AB/capstone/src/main/frontend/node_modules/@babel/runtime/helpers/esm/slicedToArray.js\";import{Frame,Banner,ContentNav,Footer}from'../frame/frame.js';import'./upload.css';import React,{useState,useEffect}from'react';import axios from'axios';import{jsx as _jsx}from\"react/jsx-runtime\";import{jsxs as _jsxs}from\"react/jsx-runtime\";function SmallMaps(){useEffect(function(){var script=document.createElement('script');script.async=true;script.src='https://openapi.map.naver.com/openapi/v3/maps.js?ncpClientId=di9lw1dnxq';script.onload=function(){var map=new window.naver.maps.Map('map',{center:new window.naver.maps.LatLng(37.563573,127.173146),zoom:10,minZoom:12// 읍면동 레벨\n//임의의 점 클릭시 마커\n});var markers=[{position:new window.naver.maps.LatLng(37.5509654,127.1470982),title:1},{position:new window.naver.maps.LatLng(37.598997,127.131314),title:2},{position:new window.naver.maps.LatLng(37.522287,127.205922),title:3}];markers.forEach(function(markerInfo){var marker=new window.naver.maps.Marker({position:markerInfo.position,map:map,title:markerInfo.title});var makeMarker=function makeMarker(coord){//클릭한 위치에 새 마커 생성하는 함수\nvar title=markers.length;var marker=new window.naver.maps.Marker({position:coord,map:map});//console.log('title',title);\nmarkers[title]=marker;};var sender=function sender(){var senderInput=document.getElementById('hiddenSender');senderInput.value=marker.title;};window.naver.maps.Event.addListener(marker,'click',sender);window.naver.maps.Event.addListener(map,'click',function(e){makeMarker(e.coord);});});};document.head.appendChild(script);},[]);return/*#__PURE__*/_jsx(\"div\",{id:\"map\",style:{width:'600px',height:'410px'}});}export default function Upload(){var _useState=useState([]),_useState2=_slicedToArray(_useState,2),selectedFiles=_useState2[0],setSelectedFiles=_useState2[1];var handleFileChange=function handleFileChange(event){// 여러 파일이 선택될 때 호출되는 함수\nvar files=event.target.files;setSelectedFiles(files);};var handleUpload=function handleUpload(event){event.preventDefault();var dateContent=event.target.dateTime.value;var marker=event.target.marker.value;console.log(dateContent+':00');if(selectedFiles.length>0){var formData=new FormData();formData.append('date',dateContent);//key-value YYYY/MM/DD\nfor(var i=0;i<selectedFiles.length;i++){formData.append('image',selectedFiles[i]);}var url='/upload/'+marker;axios.post(url,formData).then(function(res){console.log(res.json());}).catch(function(err){console.log(err);});}};return/*#__PURE__*/_jsxs(\"div\",{children:[/*#__PURE__*/_jsx(Frame,{}),/*#__PURE__*/_jsx(Banner,{name:'데이터 업로드'}),/*#__PURE__*/_jsx(ContentNav,{name:'홈페이지'}),/*#__PURE__*/_jsxs(\"form\",{onSubmit:handleUpload,children:[/*#__PURE__*/_jsxs(\"div\",{className:\"uploadContentBox\",children:[/*#__PURE__*/_jsxs(\"div\",{className:\"uploadBox\",children:[/*#__PURE__*/_jsx(\"p\",{id:\"\\uC5C5\\uB85C\\uB4DC\\uC124\\uBA85\",children:\"\\uD30C\\uC77C \\uC5C5\\uB85C\\uB4DC \\uAD00\\uB828 \\uC124\\uBA85\"}),/*#__PURE__*/_jsxs(\"div\",{className:\"fileBox\",children:[/*#__PURE__*/_jsxs(\"div\",{children:[/*#__PURE__*/_jsx(\"img\",{src:\"feather_upload-cloud.png\",width:\"60px\",alt:\"img err\"}),/*#__PURE__*/_jsx(\"div\",{className:\"\\uC5C5\\uB85C\\uB4DC\\uBD80\\uAC00\\uC124\\uBA85\",children:\"\\uD30C\\uC77C\\uC744 \\uC120\\uD0DD\\uD558\\uAC70\\uB098 \\uB4DC\\uB798\\uADF8\\uD558\\uC5EC \\uC62C\\uB824\\uC8FC\\uC138\\uC694\"}),/*#__PURE__*/_jsx(\"div\",{className:\"\\uC5C5\\uB85C\\uB4DC\\uBD80\\uAC00\\uC124\\uBA85 \\uD68C\\uC0C9\",children:\"10MB\\uC774\\uD558\\uC758 JPG\\uD30C\\uC77C\\uB9CC \\uC5C5\\uB85C\\uB4DC \\uAC00\\uB2A5\"})]}),/*#__PURE__*/_jsx(\"div\",{className:\"imgUpload\",children:/*#__PURE__*/_jsx(\"input\",{type:\"file\",onChange:handleFileChange,multiple:true})}),/*#__PURE__*/_jsx(\"br\",{}),/*#__PURE__*/_jsx(\"label\",{children:\"\\uB370\\uC774\\uD130 \\uCE21\\uC815 \\uC2DC\\uAC04\"}),/*#__PURE__*/_jsx(\"br\",{}),/*#__PURE__*/_jsx(\"input\",{type:\"datetime-local\",name:\"dateTime\"})]})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"uploadBox\",children:[/*#__PURE__*/_jsx(\"input\",{type:\"hidden\",name:\"marker\",id:\"hiddenSender\"}),/*#__PURE__*/_jsx(SmallMaps,{})]})]}),/*#__PURE__*/_jsx(\"button\",{className:\"btnUpload\",children:\"\\uC5C5\\uB85C\\uB4DC\"})]}),/*#__PURE__*/_jsx(\"br\",{}),/*#__PURE__*/_jsx(\"br\",{}),/*#__PURE__*/_jsx(Footer,{})]});}","map":{"version":3,"names":["Frame","Banner","ContentNav","Footer","React","useState","useEffect","axios","jsx","_jsx","jsxs","_jsxs","SmallMaps","script","document","createElement","async","src","onload","map","window","naver","maps","Map","center","LatLng","zoom","minZoom","markers","position","title","forEach","markerInfo","marker","Marker","makeMarker","coord","length","sender","senderInput","getElementById","value","Event","addListener","e","head","appendChild","id","style","width","height","Upload","_useState","_useState2","_slicedToArray","selectedFiles","setSelectedFiles","handleFileChange","event","files","target","handleUpload","preventDefault","dateContent","dateTime","console","log","formData","FormData","append","i","url","post","then","res","json","catch","err","children","name","onSubmit","className","alt","type","onChange","multiple"],"sources":["/Users/yu-sun00/Desktop/세종대/4-2학기/캡스톤/capstone/src/main/frontend/src/components/upload/upload.js"],"sourcesContent":["import {Frame, Banner, ContentNav, Footer} from '../frame/frame.js';\nimport './upload.css';\nimport React, { useState, useEffect } from 'react';\nimport axios from 'axios';\n\n\nfunction SmallMaps(){\n  useEffect(() => {\n    const script = document.createElement('script');\n    script.async = true;\n    script.src = 'https://openapi.map.naver.com/openapi/v3/maps.js?ncpClientId=di9lw1dnxq';\n\n    script.onload = () => {\n      const map = new window.naver.maps.Map('map', {\n        center: new window.naver.maps.LatLng(37.563573, 127.173146),\n        zoom: 10,\n        minZoom: 12, // 읍면동 레벨\n        //임의의 점 클릭시 마커\n    });  \n\n    const markers = [\n      {\n        position: new window.naver.maps.LatLng(37.5509654, 127.1470982),\n        title: 1,\n      },\n      {\n        position: new window.naver.maps.LatLng(37.598997, 127.131314),\n        title: 2,\n      },\n      {\n        position: new window.naver.maps.LatLng(37.522287, 127.205922),\n        title: 3,\n      }];\n\n      markers.forEach((markerInfo) => {\n        const marker =\n        new window.naver.maps.Marker({\n          position: markerInfo.position,\n          map: map,\n          title: markerInfo.title,\n        }); \n\n        const makeMarker = (coord) => {\n          //클릭한 위치에 새 마커 생성하는 함수\n          const title = markers.length;\n          const marker = \n          new window.naver.maps.Marker({\n            position: coord,\n            map: map,\n          });\n          //console.log('title',title);\n          markers[title] = marker;\n        };\n\n      const sender = () => {\n        const senderInput = document.getElementById('hiddenSender');\n        senderInput.value = marker.title;\n      }\n      window.naver.maps.Event.addListener(marker,'click',sender);\n      window.naver.maps.Event.addListener(map,'click',(e)=>{\n        makeMarker(e.coord);\n      });\n    });\n  };\n    document.head.appendChild(script);\n  }, []);\n\n  return(\n    <div id=\"map\" style={{ width: '600px', height: '410px' }}></div>\n  );\n}\n\n\nexport default function Upload(){\n\n  const [selectedFiles, setSelectedFiles] = useState([]);\n    const handleFileChange = (event) => {\n      // 여러 파일이 선택될 때 호출되는 함수\n      const files = event.target.files;\n      setSelectedFiles(files);\n    };\n\n\n  const handleUpload = (event) => {\n    event.preventDefault();\n\n    const dateContent = event.target.dateTime.value;\n    const marker = event.target.marker.value;\n    \n    console.log(dateContent+':00');\n    \n    if (selectedFiles.length > 0) {\n      const formData = new FormData();\n      formData.append('date',dateContent);//key-value YYYY/MM/DD\n\n      for (let i = 0; i < selectedFiles.length; i++) {\n        formData.append('image', selectedFiles[i]);\n      }\n      const url = '/upload/' + marker;\n\n      axios.post(url,formData)\n        .then(res => {\n            console.log(res.json());\n        })\n        .catch(err => {\n            console.log(err);\n        })\n  }\n  };\n\n  return(\n      <div>\n      <Frame/>\n      <Banner name={'데이터 업로드'}/>\n      <ContentNav name={'홈페이지'}/>\n      <form onSubmit = {handleUpload}>\n          <div className='uploadContentBox'>\n              <div className=\"uploadBox\">\n                  <p id=\"업로드설명\">파일 업로드 관련 설명</p>\n                  <div className=\"fileBox\">\n                    <div>\n                      <img src=\"feather_upload-cloud.png\" width=\"60px\" alt=\"img err\"/>\n                      <div className=\"업로드부가설명\">파일을 선택하거나 드래그하여 올려주세요</div>\n                      <div className=\"업로드부가설명 회색\">10MB이하의 JPG파일만 업로드 가능</div>\n                    </div>\n                    <div className='imgUpload'>\n                      <input type=\"file\" onChange={handleFileChange} multiple />\n                    </div><br/>\n                        <label>데이터 측정 시간</label><br/>\n                        <input type=\"datetime-local\" name = \"dateTime\"></input>\n                  </div>\n              </div>\n              \n              <div className=\"uploadBox\">\n                <input type=\"hidden\" name=\"marker\" id=\"hiddenSender\"/>\n                <SmallMaps/>\n              </div>\n              \n          </div>\n          <button className=\"btnUpload\">업로드</button>\n          </form>\n          <br/><br/>\n      <Footer/>\n      </div>\n  );\n}\n"],"mappings":"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"},"metadata":{},"sourceType":"module","externalDependencies":[]}